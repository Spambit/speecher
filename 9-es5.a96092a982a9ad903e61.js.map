{"version":3,"sources":["webpack:///src/app/modules/read/read.component.ts","webpack:///src/app/modules/read/read.component.html","webpack:///src/app/modules/read/allnotes/allnotes.component.html","webpack:///src/app/modules/read/read.module.ts","webpack:///src/app/modules/read/allnotes/allnotes.component.ts"],"names":["StoryComponent","toastService","templateService","viewRef","this","getTemplateContent","then","ref","toastBody","showSuccess","showToast","AllNotesComponent","SpeecherStoryReadingModule","routes","path","component","storeService","driveService","noteService","notes","alerts","navConfig","button","dropdown","dropdownTitle","dropdownItems","text","click","e","item","getMissingDriveNotesToLocalStorage","backupToDrive","contentTemplate","allNotes","index","files","allFilesInBaseFolder","length","driveFile","file","fileContent","id","storeFiles","note","JSON","parse","content","findIndex","name","store","showAlert","alert","message","splice","type","msg","push","setTimeout","closeAlert","saveNoteInGoogleDrive","failed","pathMatch","forChild"],"mappings":"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","file":"x","sourcesContent":["import {\n  Component,\n  TemplateRef,\n  OnInit,\n  ViewContainerRef,\n} from '@angular/core';\nimport { ToastService } from '@services/toast.service';\nimport { TemplateService } from '@services/template.service';\nimport { AccordianComponent } from '@components/accordian/accordian.component';\n\n@Component({\n  selector: 'speecher-story',\n  templateUrl: 'read.component.html',\n  styleUrls: ['read.component.scss'],\n})\nexport class StoryComponent implements OnInit {\n  private toastBody: TemplateRef<any>;\n  constructor(\n    private toastService: ToastService,\n    private templateService: TemplateService,\n    private viewRef: ViewContainerRef\n  ) {}\n  ngOnInit() {\n    this.templateService.getTemplateContent(this.viewRef, AccordianComponent).then((ref) => {\n      this.toastBody = ref;\n    });\n  }\n  showToast() {\n    this.toastService.showSuccess(this.toastBody);\n  }\n}\n","<div class='jumbotron big'>\n  <h1>Sita</h1>\n  <br>\n  <p (click)='showToast()'>\n    3400 BCE, somewhere near the Godavari River, India Sita cut quickly and efficiently, slicing through the thick leaf stems with her sharp knife. The dwarf banana trees were as tall as she was. She did not need to stretch. She stopped and looked at her handiwork. Then she cast a look at Makrant, the Malayaputra soldier, a short distance away. He had cut down perhaps half the number of leaves that Sita had. The weather was calm. Just a little while ago, the wind had been howling through this part of the forest. Unseasonal rain had lashed the area. Sita and Makrant had stood under a thick canopy\n\nAmish. Sita: Warrior of Mithila (Ram Chandra) (p. 1). Westland. Kindle Edition.\n  </p>\n  <p>\n    of trees to save themselves from the rain. The winds had been so loud that it had been almost impossible for them to talk to each other. And just as suddenly, calm had descended. The rain and winds had vanished. They’d quickly headed to a patch of the woods with an abundance of dwarf banana trees. For the entire purpose of the excursion was to find these leaves. ‘That’s enough, Makrant,’ said Sita. Makrant turned around. The wetness had made it hard to cut the leaf stems. Under the circumstances, he had thought that he had done a good job. Now, he looked at the stack of leaves by Sita’s side. And then down at his own much smaller pile. He smiled sheepishly.\n\n    Amish. Sita: Warrior of Mithila (Ram Chandra) (pp. 1-2). Westland. Kindle Edition.\n  </p>\n  <speecher-toasts aria-live=\"polite\" aria-atomic=\"true\"></speecher-toasts>\n</div>\n","<speecher-nav [config]=\"navConfig\"></speecher-nav>\n<p class=\"fixed-bottom m-2\" *ngFor=\"let alert of alerts\">\n  <ngb-alert class=\"border-0\" [dismissible]=\"false\" [type]=\"alert.type\" (close)=\"closeAlert(alert)\">{{ alert.message }}</ngb-alert>\n</p>\n<div class=\"all-notes-container\">\n  <ngb-accordion #acc=\"ngbAccordion\">\n    <ng-template ngFor let-item [ngForOf]=\"notes\" let-i=\"index\" [ngForTrackBy]=\"identify\">\n      <ngb-panel [id]=\"i\">\n        <ng-template ngbPanelTitle>\n          <div class=\"panel-title bg-transparent\">\n            <strong class=\"m-0\">{{item.name}}</strong>\n          </div>\n        </ng-template>\n        <ng-template ngbPanelContent>\n          {{item.note}}\n          <hr />\n          <ng-template ngFor let-word [ngForOf]=\"item.words\" let-i=\"index\" [ngForTrackBy]=\"identify\">\n            <ng-template [ngTemplateOutlet]=\"contentTemplate\" [ngTemplateOutletContext]=\"{word: word}\">\n            </ng-template>\n            <br>\n          </ng-template>\n        </ng-template>\n      </ngb-panel>\n    </ng-template>\n  </ngb-accordion>\n</div>\n","import { NgModule } from '@angular/core';\nimport { StoryComponent } from './read.component';\nimport { RouterModule } from '@angular/router';\nimport { SharedModule } from '../shared/shared.module';\nimport { AllNotesComponent } from './allnotes/allnotes.component';\n\nconst routes = [\n  {\n    path : '',\n    component: AllNotesComponent,\n    pathMatch: 'full',\n  },\n  {\n    path: 'story',\n    component: StoryComponent,\n    pathMatch: 'full',\n  },\n];\n\n@NgModule({\n  imports: [SharedModule, RouterModule.forChild(routes)],\n  declarations: [StoryComponent, AllNotesComponent],\n  exports: [StoryComponent, AllNotesComponent],\n})\nexport class SpeecherStoryReadingModule {}\n","import {\n  Component,\n  OnInit,\n  TemplateRef,\n  ViewContainerRef,\n} from '@angular/core';\nimport { Note } from '@services/filter.result';\nimport { NavConfig } from '@components/speecher-nav/speecher-nav.component';\nimport { TemplateService } from '@services/template.service';\nimport { AccordianComponent } from '@components/accordian/accordian.component';\nimport { LocalStorageService, StoreType } from '@services/store.service';\nimport { DriveService } from '@services/drive.service';\nimport { NoteService } from '@services/note.service';\nimport { IAlert } from '@services/filter.result';\n\n@Component({\n  selector: 'speecher-allnotes',\n  templateUrl: 'allnotes.component.html',\n  styleUrls: ['allnotes.component.scss'],\n})\nexport class AllNotesComponent implements OnInit {\n  notes: Note[] = [];\n  alerts: IAlert[] = [];\n  selectedItem: HTMLElement;\n  contentTemplate: TemplateRef<any>;\n  constructor(\n    private templateService: TemplateService,\n    private viewRef: ViewContainerRef,\n    private storeService: LocalStorageService,\n    private driveService: DriveService,\n    private noteService: NoteService\n  ) {}\n  navConfig: NavConfig = {\n    button: {\n      dropdown: true,\n      dropdownTitle: 'All Stories',\n      dropdownItems: [\n        {\n          text: `Sync`,\n          click: (e, item) => this.getMissingDriveNotesToLocalStorage(),\n        },\n        {\n          text: `Backup`,\n          click: (e, item) => this.backupToDrive(),\n        },\n      ],\n    },\n  };\n  async ngOnInit() {\n    this.templateService\n      .getTemplateContent(this.viewRef, AccordianComponent)\n      .then((ref) => {\n        this.contentTemplate = ref;\n      });\n\n    this.notes = await this.storeService.allNotes<Note>();\n  }\n\n  identify(index: number) {\n    return index;\n  }\n\n  private async getMissingDriveNotesToLocalStorage() {\n    const files = await this.driveService.allFilesInBaseFolder();\n    if (files.length !== 0) {\n      for (const file of files) {\n        const driveFile = await this.driveService.fileContent(file.id);\n        if (driveFile) {\n          const storeFiles = await this.storeService.allNotes<Note>();\n          const note = JSON.parse(driveFile.content) as Note;\n          const index = storeFiles.findIndex(\n            (item) => item.name === note.name\n          );\n          if (index === -1) {\n            this.storeService.store(note, note.name, StoreType.note);\n          }\n        }\n      }\n    }\n    this.showAlert('warning', 'Notes from your google drive were synced.');\n  }\n\n  closeAlert(alert: IAlert) {\n    const index = this.alerts.findIndex(item => item.message === alert.message);\n    if (index !== -1) {\n      this.alerts.splice(index, 1);\n    }\n  }\n\n  private showAlert(\n    type:\n      | 'success'\n      | 'info'\n      | 'primary'\n      | 'secondary'\n      | 'light'\n      | 'warning'\n      | 'dark',\n    msg: string\n  ) {\n    const alert = {\n      type, message: msg\n    };\n    this.alerts.push(alert);\n    setTimeout(() => {\n      this.closeAlert(alert);\n    }, 3000);\n  }\n\n  private async backupToDrive() {\n    const storeFiles = await this.storeService.allNotes<Note>();\n    let failed: boolean;\n    for (const note of storeFiles) {\n      this.noteService\n        .saveNoteInGoogleDrive(note)\n        .then(() => {\n          this.showAlert(\n            'warning',\n            'All notes backed up to your google drive.'\n          );\n        })\n        .catch((e) => {\n          failed = true;\n        });\n    }\n    if (failed) {\n      this.alerts.push({\n        type: 'warning',\n        message: `Could note save one or mpre notes in your google drive.`,\n      });\n    }\n  }\n}\n"]}